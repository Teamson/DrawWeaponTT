{
  "code": "import PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\nimport AdMgr from \"../Mod/AdMgr\";\r\nimport GameUI from \"./GameUI\";\r\nexport default class WeaponDicUI extends Laya.Scene {\r\n    constructor() {\r\n        super();\r\n        this.closeBtn = this['closeBtn'];\r\n        this.gotNum = this['gotNum'];\r\n        this.weaponName = this['weaponName'];\r\n        this.weaponPic = this['weaponPic'];\r\n        this.tipsPic = this['tipsPic'];\r\n        this.info = this['info'];\r\n        this.leftBtn = this['leftBtn'];\r\n        this.rightBtn = this['rightBtn'];\r\n        this.pointNode = this['pointNode'];\r\n        this.tipsBg = this['tipsBg'];\r\n        this.findBtn = this['findBtn'];\r\n        this.lightAni = this['lightAni'];\r\n        this.curPage = 0;\r\n    }\r\n    onOpened() {\r\n        this.closeBtn.on(Laya.Event.CLICK, this, this.closeBtnCB);\r\n        this.leftBtn.on(Laya.Event.CLICK, this, this.turnPageBtnCB, [true]);\r\n        this.rightBtn.on(Laya.Event.CLICK, this, this.turnPageBtnCB, [false]);\r\n        this.findBtn.on(Laya.Event.CLICK, this, this.findBtnCB);\r\n        this.initWeaponData(this.curPage);\r\n    }\r\n    onClosed() {\r\n    }\r\n    turnPageBtnCB(isLeft) {\r\n        if (isLeft) {\r\n            this.curPage--;\r\n        }\r\n        else {\r\n            this.curPage++;\r\n        }\r\n        this.initWeaponData(this.curPage);\r\n    }\r\n    initWeaponData(id) {\r\n        this.weaponPic.skin = 'weaponRes/sq_wq' + (id + 1) + '.png';\r\n        this.tipsPic.skin = 'weaponRes/sq_tx' + (id + 1) + '.png';\r\n        this.weaponName.text = PlayerDataMgr.getWeaponDataById(id).name;\r\n        this.info.text = PlayerDataMgr.getWeaponDataById(id).info;\r\n        this.leftBtn.visible = this.curPage > 0;\r\n        this.rightBtn.visible = this.curPage < 8;\r\n        for (let i = 0; i < this.pointNode.numChildren; i++) {\r\n            let p = this.pointNode.getChildAt(i);\r\n            p.skin = 'weaponRes/sq_yd' + (i == id ? '2' : '1') + '.png';\r\n        }\r\n        if (!localStorage.getItem('weapon' + id)) {\r\n            this.weaponName.text = '通关' + (id * 2 - parseInt(localStorage.getItem('weaponGrade'))) + '个关卡后解锁';\r\n            this.weaponPic.skin = 'weaponRes/sq_wh.png';\r\n            this.tipsBg.visible = false;\r\n            this.info.visible = false;\r\n            this.findBtn.visible = true;\r\n            this.lightAni.y = 300;\r\n            this.weaponPic.y = 300;\r\n            this.weaponPic.scale(1, 1);\r\n        }\r\n        else {\r\n            this.tipsBg.visible = true;\r\n            this.info.visible = true;\r\n            this.findBtn.visible = false;\r\n            this.lightAni.y = 342;\r\n            this.weaponPic.y = 342;\r\n            this.weaponPic.scale(0.5, 0.5);\r\n        }\r\n        let count = 0;\r\n        for (let i = 0; i < 9; i++) {\r\n            if (localStorage.getItem('weapon' + i)) {\r\n                count++;\r\n            }\r\n        }\r\n        this.gotNum.text = count.toString() + '/9';\r\n    }\r\n    findBtnCB() {\r\n        let cb = () => {\r\n            localStorage.setItem('weapon' + this.curPage, '1');\r\n            GameUI.Share.refreshArr.push(this.curPage);\r\n            GameUI.Share.refreshWeaponTips();\r\n            this.initWeaponData(this.curPage);\r\n        };\r\n        AdMgr.instance.showVideo(cb);\r\n    }\r\n    closeBtnCB() {\r\n        this.close();\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaProjects/DrawWeaponTT/src/Libs/PlayerDataMgr.ts",
    "E:/LayaProjects/DrawWeaponTT/src/Mod/AdMgr.ts",
    "E:/LayaProjects/DrawWeaponTT/src/View/GameUI.ts"
  ]
}
