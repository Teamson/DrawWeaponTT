{
  "code": "import PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\nimport GameLogic from \"../Crl/GameLogic\";\r\nimport Utility from \"../Mod/Utility\";\r\nimport ShareMgr from \"../Mod/ShareMgr\";\r\nimport WxApi from \"../Libs/WxApi\";\r\nexport default class FreeSkinUI extends Laya.Scene {\r\n    constructor() {\r\n        super();\r\n        this.closeBtn = this['closeBtn'];\r\n        this.itemNode = this['itemNode'];\r\n        this.randBtn = this['randBtn'];\r\n        this.skinArr = [];\r\n    }\r\n    onOpened(param) {\r\n        this.closeBtn.on(Laya.Event.CLICK, this, this.closeBtnCB);\r\n        this.randBtn.on(Laya.Event.CLICK, this, this.randBtnCB);\r\n        this.skinArr = PlayerDataMgr.getFreeSkins();\r\n        this.initData();\r\n        WxApi.fixBtnTouchPos(this.closeBtn, 700, 540, this);\r\n    }\r\n    onClosed() {\r\n    }\r\n    initData() {\r\n        for (let i = 0; i < 4; i++) {\r\n            let item = this.itemNode.getChildAt(i);\r\n            if (i >= this.skinArr.length) {\r\n                item.visible = false;\r\n                continue;\r\n            }\r\n            let icon = item.getChildByName('icon');\r\n            icon.skin = 'freeSkins/HeroD_' + (this.skinArr[i] + 1) + '.png';\r\n            let id = this.skinArr[i];\r\n            item.off(Laya.Event.CLICK, this, this.itemCB);\r\n            item.on(Laya.Event.CLICK, this, this.itemCB, [id]);\r\n        }\r\n    }\r\n    itemCB(id) {\r\n        WxApi.aldEvent('试用皮肤：点击');\r\n        let cb = () => {\r\n            WxApi.aldEvent('试用皮肤：成功');\r\n            PlayerDataMgr.freeSkinId = id;\r\n            GameLogic.Share.changePlayerSkin(id);\r\n            this.closeBtnCB();\r\n        };\r\n        ShareMgr.instance.shareGame(cb);\r\n    }\r\n    randBtnCB() {\r\n        let id = Utility.getRandomItemInArr(this.skinArr);\r\n        this.itemCB(id);\r\n    }\r\n    closeBtnCB() {\r\n        this.close();\r\n        GameLogic.Share.canReady = true;\r\n        GameLogic.Share.readyGo();\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaProjects/DrawWeapon/src/Libs/PlayerDataMgr.ts",
    "E:/LayaProjects/DrawWeapon/src/Crl/GameLogic.ts",
    "E:/LayaProjects/DrawWeapon/src/Mod/Utility.ts",
    "E:/LayaProjects/DrawWeapon/src/Mod/ShareMgr.ts",
    "E:/LayaProjects/DrawWeapon/src/Libs/WxApi.ts",
    "E:/LayaProjects/DrawWeapon/src/Mod/AdMgr.ts"
  ]
}
