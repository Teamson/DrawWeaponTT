{
  "code": "import PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\nimport Utility from \"../Mod/Utility\";\r\nimport GameTopNode from \"./GameTopNode\";\r\nimport ShareMgr from \"../Mod/ShareMgr\";\r\nimport WxApi from \"../Libs/WxApi\";\r\nimport JJMgr, { SceneDir } from \"../JJExport/Common/JJMgr\";\r\nimport AdMgr from \"../Mod/AdMgr\";\r\nexport default class OfflineUI extends Laya.Scene {\r\n    constructor() {\r\n        super();\r\n        this.coinNum = this['coinNum'];\r\n        this.noBtn = this['noBtn'];\r\n        this.trippleBtn = this['trippleBtn'];\r\n        this.toggleBtn = this['toggleBtn'];\r\n        this.point = this['point'];\r\n        this.exTimeMin = 0;\r\n        this.bounesNum = 0;\r\n        this.bounesNumTriple = 0;\r\n        this.isTripple = true;\r\n        this.updateCompleted = true;\r\n    }\r\n    onOpened(param) {\r\n        this.toggleBtn.on(Laya.Event.CLICK, this, this.trippleBtnCB);\r\n        this.trippleBtn.on(Laya.Event.CLICK, this, this.getBounesCB);\r\n        this.noBtn.on(Laya.Event.CLICK, this, this.getBounesCB);\r\n        this.exTimeMin = param;\r\n        this.bounesNum = PlayerDataMgr.getPlayerOffline(this.exTimeMin);\r\n        this.bounesNumTriple = this.bounesNum * 3;\r\n        this.initData();\r\n        AdMgr.instance.showBanner();\r\n    }\r\n    onClosed() {\r\n        AdMgr.instance.hideBanner();\r\n        JJMgr.instance.openScene(SceneDir.SCENE_FRIENDGAME);\r\n    }\r\n    initData() {\r\n        this.coinNum.value = this.bounesNumTriple.toString();\r\n        this.changePoint();\r\n        this.changeBtn();\r\n    }\r\n    trippleBtnCB() {\r\n        if (!this.updateCompleted)\r\n            return;\r\n        this.updateCompleted = false;\r\n        this.isTripple = !this.isTripple;\r\n        this.changePoint();\r\n        this.changeBtn();\r\n        Utility.updateNumber(this.bounesNum, 3, this.coinNum, false, this.isTripple, () => {\r\n            this.updateCompleted = true;\r\n        });\r\n    }\r\n    getBounesCB() {\r\n        let cb = () => {\r\n            if (this.isTripple)\r\n                WxApi.aldEvent('离线收益三倍：成功');\r\n            PlayerDataMgr.changeCoin(this.isTripple ? this.bounesNumTriple : this.bounesNum);\r\n            GameTopNode.Share.initData();\r\n            this.close();\r\n        };\r\n        if (this.isTripple) {\r\n            WxApi.aldEvent('离线收益三倍：点击');\r\n            ShareMgr.instance.shareGame(cb);\r\n        }\r\n        else {\r\n            cb();\r\n        }\r\n    }\r\n    changePoint() {\r\n        this.point.skin = this.isTripple ? 'offlineUI/lx-yuan.png' : 'offlineUI/lx-yuan2.png';\r\n    }\r\n    changeBtn() {\r\n        this.noBtn.visible = !this.isTripple;\r\n        this.trippleBtn.visible = this.isTripple;\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaProjects/DrawWeapon/src/Libs/PlayerDataMgr.ts",
    "E:/LayaProjects/DrawWeapon/src/Mod/Utility.ts",
    "E:/LayaProjects/DrawWeapon/src/View/GameTopNode.ts",
    "E:/LayaProjects/DrawWeapon/src/Mod/ShareMgr.ts",
    "E:/LayaProjects/DrawWeapon/src/Libs/WxApi.ts",
    "E:/LayaProjects/DrawWeapon/src/JJExport/Common/JJMgr.ts",
    "E:/LayaProjects/DrawWeapon/src/Mod/AdMgr.ts"
  ]
}
