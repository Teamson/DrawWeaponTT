{
  "code": "import JJUtils from \"./JJUtils\";\r\nexport var SceneDir;\r\n(function (SceneDir) {\r\n    SceneDir[\"SCENE_FRIENDGAME\"] = \"JJExport/FriendGameUI.scene\";\r\n    SceneDir[\"SCENE_SCROLLUI\"] = \"JJExport/ScrollUI.scene\";\r\n    SceneDir[\"SCENE_RECOMMENDUI\"] = \"JJExport/RecommendUI.scene\";\r\n    SceneDir[\"SCENE_FULLGAMEUI\"] = \"JJExport/FullGameUI.scene\";\r\n    SceneDir[\"SCENE_FINISHGAMEUI\"] = \"JJExport/FinishGameUI.scene\";\r\n    SceneDir[\"SCENE_DRAWUI\"] = \"JJExport/DrawUI.scene\";\r\n})(SceneDir || (SceneDir = {}));\r\nexport default class JJMgr {\r\n    constructor() {\r\n        this.dataConfig = {\r\n            allow_share: true,\r\n            front_allow_return: true,\r\n            front_banner_number: 8,\r\n            front_banner_second: 800,\r\n            front_button_second: 300,\r\n            front_ckin_banner_move: 700,\r\n            front_ckin_banner_second: 500,\r\n            front_direct_draw: true,\r\n            front_extra_share: false,\r\n            front_home_screen_level: 10,\r\n            front_home_screen_number: 5,\r\n            front_lucky_screen_chance: 50,\r\n            front_lucky_screen_level: 20,\r\n            front_lucky_screen_number: 5,\r\n            front_pass_gate: 10,\r\n            front_proceed_game: 1000,\r\n            front_proceed_history: 1,\r\n            front_share_config: { image: \"https://oss.99huyu.cn/wxhuyu/a1f98703efb3f3bfe2b9a4d5a250f926.png\", title: \"根据实际年纪看看你该在啥水平...\" },\r\n            front_share_number: 4,\r\n            is_allow_area: 1\r\n        };\r\n        this.navDataArr = [];\r\n        this.JJConfigUrl = 'https://jiujiu.99huyu.cn/m/weapon/config.json';\r\n        this.isFinished = false;\r\n    }\r\n    static get instance() {\r\n        if (!this._instance) {\r\n            this._instance = new JJMgr();\r\n        }\r\n        return this._instance;\r\n    }\r\n    canShowFullScreen(level) {\r\n        return level >= this.dataConfig.front_auto_remen_level;\r\n    }\r\n    initJJ(version = '1.0.0', completeCB) {\r\n        JJUtils.httpRequest(this.JJConfigUrl, 'version=' + version, 'get', (res) => {\r\n            res = JSON.parse(res);\r\n            console.log('JJ config.json:', res);\r\n            this.dataConfig = res.data.config;\r\n            this.navDataArr = res.data.mores.remen_game;\r\n            this.isFinished = true;\r\n            completeCB && completeCB();\r\n        });\r\n    }\r\n    openScene(sceneDir, closeOther = false, param, parent) {\r\n        Laya.Scene.open(sceneDir, closeOther, param, Laya.Handler.create(this, (v) => {\r\n            if (parent)\r\n                parent.addChild(v);\r\n        }));\r\n    }\r\n    closeScene(sceneDir) {\r\n        Laya.Scene.close(sceneDir);\r\n    }\r\n    NavigateApp(index, cancelCB, successCB, from) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window.wx.aldSendEvent('导出-总点击数');\r\n            switch (from) {\r\n                case SceneDir.SCENE_DRAWUI:\r\n                    Laya.Browser.window.wx.aldSendEvent('抽屉页面-总点击数');\r\n                    break;\r\n                case SceneDir.SCENE_FINISHGAMEUI:\r\n                    break;\r\n                case SceneDir.SCENE_FRIENDGAME:\r\n                    Laya.Browser.window.wx.aldSendEvent('好友都在玩的爆款游戏弹-总点击数');\r\n                    break;\r\n                case SceneDir.SCENE_FULLGAMEUI:\r\n                    Laya.Browser.window.wx.aldSendEvent('全屏幕导出页-总点击数');\r\n                    break;\r\n                case SceneDir.SCENE_RECOMMENDUI:\r\n                    Laya.Browser.window.wx.aldSendEvent('热门推荐全屏幕导出页-总点击数');\r\n                    break;\r\n                case SceneDir.SCENE_SCROLLUI:\r\n                    break;\r\n            }\r\n            Laya.Browser.window.wx.navigateToMiniProgram({\r\n                appId: this.navDataArr[index].appid,\r\n                path: this.navDataArr[index].path,\r\n                success: (res) => {\r\n                    successCB && successCB();\r\n                    Laya.Browser.window.wx.aldSendEvent('导出成功-总用户数');\r\n                    Laya.Browser.window.wx.aldSendEvent('导出成功-' + this.navDataArr[index].title);\r\n                    console.log('导出成功-' + this.navDataArr[index].title);\r\n                    switch (from) {\r\n                        case SceneDir.SCENE_DRAWUI:\r\n                            Laya.Browser.window.wx.aldSendEvent('抽屉页面-总成功跳转数');\r\n                            break;\r\n                        case SceneDir.SCENE_FINISHGAMEUI:\r\n                            break;\r\n                        case SceneDir.SCENE_FRIENDGAME:\r\n                            Laya.Browser.window.wx.aldSendEvent('好友都在玩的爆款游戏弹-总成功跳转数');\r\n                            break;\r\n                        case SceneDir.SCENE_FULLGAMEUI:\r\n                            Laya.Browser.window.wx.aldSendEvent('全屏幕导出页-总成功跳转数');\r\n                            break;\r\n                        case SceneDir.SCENE_RECOMMENDUI:\r\n                            Laya.Browser.window.wx.aldSendEvent('热门推荐全屏幕导出页-总成功跳转数');\r\n                            break;\r\n                        case SceneDir.SCENE_SCROLLUI:\r\n                            break;\r\n                    }\r\n                },\r\n                fail: (res) => {\r\n                    cancelCB && cancelCB();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    getTitle(index, sub = true) {\r\n        if (sub) {\r\n            if (this.navDataArr[index].subtitle && this.navDataArr[index].subtitle != '') {\r\n                return this.navDataArr[index].subtitle;\r\n            }\r\n            else {\r\n                return this.navDataArr[index].title;\r\n            }\r\n        }\r\n        else {\r\n            return this.navDataArr[index].title;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaProjects/DrawWeapon/src/JJExport/Common/JJUtils.ts"
  ]
}
